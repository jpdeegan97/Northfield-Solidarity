Ns-bcp-014-dataref
NS-OCP-014 — DATAREF (Data Reference)

0. Document Control

Program: Northfield Solidarity (NS)
Engine: OCP — Onchain Compute Plane
Document ID: NS-OCP-014-DATAREF
Status: Draft v1
Depends On: NS-OCP-002-TAXONOMY, NS-OCP-007-DATAMODEL, NS-OCP-011-APIMAP, NS-OCP-012-STATE
Owner: OCP Data Custodian (TBD)
1. Purpose

This document is the canonical data reference for OCP.

It defines:

canonical identifiers and naming
enums and controlled vocabularies
required fields per entity
JSON schema shapes (v1)
example records
Use this to ensure:

consistent registry entries
enforceable policy gates
reliable integrations to SIG/FLO/IDN/DRE
2. Canonical Identifiers

2.1 System ID
Format: OCP-SYS-{Name}
Example: OCP-SYS-TreasuryVault
2.2 Contract Package ID
Format: OCP-CONTRACT-{Name}
Example: OCP-CONTRACT-TreasuryVault
2.3 Build Artifact Set ID
Format: ART-{PackageName}-{Semver}-{DigestShort}
Example: ART-TreasuryVault-1.0.0-a1b2c3d4
2.4 Deployment ID
Format: OCP-DEPLOY-{PackageName}-{Network}-{Stage}#{N}
Example: OCP-DEPLOY-TreasuryVault-ARBMAIN-PROD#1
2.5 Release ID
Format: OCP-REL-YYYYMMDD-###
Example: OCP-REL-20251223-001
2.6 Upgrade ID
Format: OCP-UPG-{SystemName}-{Network}-YYYYMMDD-###
Example: OCP-UPG-TreasuryVault-ARBMAIN-20260110-001
2.7 Policy Check ID
Format: OCP-PCHK-{ReleaseId}-{PolicyName}
Example: OCP-PCHK-OCP-REL-20251223-001-THREAT_MODEL_APPROVED
2.8 Incident ID
Format: OCP-INC-YYYYMMDD-###
Example: OCP-INC-20251223-002
3. Enums (Controlled Vocabularies)

3.1 Risk Class
LOW
MEDIUM
HIGH
CRITICAL
3.2 Change Class
PATCH
MINOR
MAJOR
EMERGENCY
3.3 Environment
DEV
TEST
PROD
3.4 System Status
IDEA
DESIGN
BUILD
VERIFY
READY
PROD
DEPRECATED
RETIRED
3.5 Release Status
DRAFT
GATED
AWAITING_APPROVAL
APPROVED
SCHEDULED
EXECUTING
SUCCEEDED
FAILED
CANCELED
3.6 Deployment Status
PLANNED
DEPLOYING
ACTIVE
PAUSED
DEGRADED
DEPRECATED
RETIRED
3.7 Policy Result
PASS
FAIL
WAIVED
3.8 Security Artifact Type
THREAT_MODEL
RUNBOOK
UPGRADE_POLICY
AUDIT_REPORT
ANALYSIS_REPORT
POSTMORTEM
3.9 Finding Severity
INFO
LOW
MED
HIGH
CRITICAL
3.10 Incident Severity
S1
S2
S3
S4
3.11 Custody / Signer Type
DEV_EPHEMERAL
HSM
MULTISIG
MPC
3.12 Upgrade Stance
IMMUTABLE
UPGRADEABLE
MIGRATE_ONLY
4. Required Fields (Minimums)

4.1 OCP_SYSTEM (Required)
system_id
name
risk_class
upgrade_stance
owner_identity_id
status
4.2 CONTRACT_PACKAGE (Required)
package_id
system_id
semver
compiler
source_commit
4.3 BUILD_ARTIFACT_SET (Required)
artifact_set_id
package_id
build_id
bytecode_digests
abi_digests
4.4 DEPLOYMENT (Required)
deployment_id
system_id
package_id
artifact_set_id
environment_id
network_id
address
tx_hash
deployed_at
deploy_signer_id
config_digest
4.5 OCP_RELEASE (Required)
release_id
system_id
change_class
risk_class
release_manifest_digest
approved_by (or empty if not required)
executed_by (if executed)
executed_at (if executed)
4.6 POLICY_CHECK (Required)
policy_check_id
release_id
policy_name
result
checked_at
waiver_ref (required if WAIVED)
5. Canonical JSON Shapes (v1)

5.1 System
{
  "system_id": "OCP-SYS-TreasuryVault",
  "name": "Treasury Vault",
  "description": "Governed custody vault",
  "owner_identity_id": "IDN:NorthfieldSolidarityOps",
  "risk_class": "HIGH",
  "upgrade_stance": "UPGRADEABLE",
  "status": "PROD",
  "links": {
    "repo": "uri",
    "runbook": "uri",
    "dashboard": "uri"
  },
  "created_at": "...",
  "updated_at": "..."
}
5.2 Deployment
{
  "deployment_id": "OCP-DEPLOY-TreasuryVault-ARBMAIN-PROD#1",
  "system_id": "OCP-SYS-TreasuryVault",
  "package_id": "OCP-CONTRACT-TreasuryVault",
  "artifact_set_id": "ART-TreasuryVault-1.0.0-a1b2c3d4",
  "environment_id": "PROD",
  "network_id": "ARBMAIN",
  "address": "0x...",
  "tx_hash": "0x...",
  "block_number": 123456,
  "deployed_at": "2025-12-23T05:00:00Z",
  "deploy_signer_id": "SIGNER-MULTISIG-01",
  "config_digest": "CFG-...",
  "status": "ACTIVE",
  "is_proxy": true,
  "proxy_type": "UUPS",
  "implementation_address": "0x...",
  "admin_controller": "0x..."
}
5.3 Release
{
  "release_id": "OCP-REL-20251223-001",
  "system_id": "OCP-SYS-TreasuryVault",
  "change_class": "MINOR",
  "risk_class": "HIGH",
  "release_manifest_digest": "MAN-...",
  "status": "SUCCEEDED",
  "approved_by": ["IDN:GovApprover1", "IDN:GovApprover2"],
  "approval_record_refs": ["uri"],
  "executed_by": "IDN:OCPOperator1",
  "executed_at": "2025-12-23T05:10:00Z",
  "notes": "Initial mainnet deployment"
}
5.4 Policy Check
{
  "policy_check_id": "OCP-PCHK-OCP-REL-20251223-001-THREAT_MODEL_APPROVED",
  "release_id": "OCP-REL-20251223-001",
  "policy_name": "THREAT_MODEL_APPROVED",
  "result": "PASS",
  "evidence": {"artifact_ref": "uri"},
  "checked_at": "2025-12-23T05:05:00Z"
}
6. Canonical Policy Names (v1)

These names should be stable because they appear in policy checks.

THREAT_MODEL_APPROVED
RUNBOOK_PRESENT
ANALYSIS_REPORTS_PRESENT
FUZZING_REQUIRED_PASSED
AUDIT_REQUIRED_ATTACHED
CUSTODY_PROD_ENFORCED
APPROVALS_REQUIRED_GRANTED
REGISTRY_UPDATE_REQUIRED
MONITORING_REQUIRED_ENABLED
7. Normalized Signal Types (v1)

Signals emitted to SIG/FLO should use stable types.

7.1 Signal Types
PRIVILEGED_ACTION
REVERT_SPIKE
PAUSE_STATE
INDEXER_LAG
RPC_DEGRADED
VALUE_MOVEMENT
UPGRADE_EXECUTED
7.2 Value Movement Subtypes (for FLO)
DEPOSIT
WITHDRAWAL
TRANSFER
FEE_COLLECTED
8. Data Quality Rules

IDs must be globally unique and stable.
All digests are content hashes (algorithm recorded in metadata).
PROD records must be immutable except through append-only state events.
Every WAIVED policy check must include waiver_ref.
9. Change Management for Dataref

OCP DATAREF changes require:

a OCP-ADR record if they impact external integrations
version tagging of schema definitions
backward compatibility window for consuming systems
10. End of Canonical Set

This document is the authoritative reference for OCP’s v1 data vocabulary and schemas.
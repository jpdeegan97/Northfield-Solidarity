
NS-INT-005 — DECISION

1. Purpose

This document records the key architectural and product decisions for Intervention (quickscope), including rationale, alternatives considered, and the implications for NS.

2. Decision Log (Canonical)

INT-DEC-001 — Intervention is a First-Class NS Engine

Status: Approved

Decision: Create Intervention as its own engine rather than a “platform-only service.”

Rationale: Enables future creative extensions ("quickscope" capabilities), a clear ownership boundary, and first-class documentation/lifecycle.

Alternatives Considered:

Sidecar only to GGP (non-engine)

Embed state functionality into GGP

Implications:

Intervention gets its own roadmap, API surface, and governance integration points.

Must avoid scope creep into generic data platform.

INT-DEC-002 — Architecture Option B: Core Cluster + Edge Caches Everywhere

Status: Approved

Decision: Implement Intervention as a cluster Core service with local Edge caches/sidecars/SDKs for each engine/UI.

Rationale:

Low-latency reads where work happens

Resilience during partial outages

Scales subscription fanout and reduces Core query load

Alternatives Considered:

Option A: only a sidecar colocated with GGP

Implications:

Requires sync protocol (snapshot + cursor + replay)

Requires edge health/lag observability

INT-DEC-003 — Event-First Truth (Event Sourcing Pattern)

Status: Approved

Decision: Events are immutable; state is derived via projections.

Rationale:

Replayability and auditability

Deterministic reconstruction

Clean time-travel and forensics

Alternatives Considered:

Direct state mutation with periodic audit logs

Implications:

Requires projector runtime and schema evolution discipline

Requires idempotency and ordered-per-key semantics

INT-DEC-004 — Canonical Event Envelope Required Across NS

Status: Approved

Decision: All producers must emit events using a canonical envelope with correlation/causation.

Rationale:

Interoperability

End-to-end threading across engines

Consistent provenance and identity

Alternatives Considered:

Allow each engine to define its own event contract

Implications:

Requires schema registry / contract enforcement

Requires adoption work per engine

INT-DEC-005 — Ordered-Per-Key, Not Global Total Order

Status: Approved

Decision: Guarantee ordering for a key (entity/workflow/correlation), not across the whole system.

Rationale:

Scales horizontally

Matches practical distributed constraints

Alternatives Considered:

Global total order (high cost, low scale)

Implications:

Consumers must not assume global ordering

Firmament uses correlation/thread and key-based ordering

INT-DEC-006 — Delivery Semantics: At-Least-Once + Idempotency

Status: Approved

Decision: Default to at-least-once delivery; achieve effective exactly-once via idempotency + version checks.

Rationale:

Practical operational reliability

Simplifies distributed streaming

Alternatives Considered:

Exactly-once end-to-end guarantees

Implications:

Every consumer and projector must handle duplicates

Event IDs and versioning are mandatory

INT-DEC-007 — GGP Remains the Semantic Gatekeeper

Status: Approved

Decision: Intervention does not decide if transitions are “allowed.” Protected transitions consult GGP.

Rationale:

Separation of concerns

Keeps governance centralized in GGP

Alternatives Considered:

Let Intervention embed policy evaluation

Implications:

Requires GGP gate adapter

Requires policy_context_ref and gating outcomes in state

INT-DEC-008 — Protected Transition Classes

Status: Approved

Decision: Maintain a configurable list of event types/classes that require GGP gating.

Rationale:

Flexibility as NS evolves

Prevents over-gating everything

Alternatives Considered:

Gate all events

Gate none

Implications:

Requires configuration management and audit trail for gate rules

INT-DEC-009 — Projections Are Versioned Products

Status: Approved

Decision: Projections/read models are explicit artifacts with versions, deployment states, and rebuild strategies.

Rationale:

Safe evolution

Supports Firmament and operator UX stability

Alternatives Considered:

Ad-hoc projector code without lifecycle

Implications:

Requires projection registry and management tools

INT-DEC-010 — Firmament Is a First-Class Consumer

Status: Approved

Decision: Optimize Intervention for Firmament’s needs: snapshot + delta streams + visualization-ready graph projections.

Rationale:

Firmament is a flagship surface for “living system” state

Alternatives Considered:

Treat Firmament as a generic UI consumer

Implications:

Requires Firmament-specific read models (graph view)

Requires high fanout streaming posture

3. Deferred Decisions (Not Yet Locked)

INT-DEC-D-001 — Technology Choices for Event Log and Read Stores

Status: Deferred

Open Options: Postgres, Kafka + log store, specialized event store, hybrid

Decision Owner: NS platform architecture

Target Doc: NS-INT-009 (IMPL)

INT-DEC-D-002 — Sync Mode for Protected Transitions

Status: Deferred

Open Options:

synchronous gating (low latency, potential bottleneck)

asynchronous gating (quarantine then authorize)

Target Doc: NS-INT-012 (STATE) / NS-INT-009 (IMPL)

INT-DEC-D-003 — Edge Form Factor

Status: Deferred

Open Options:

sidecar container

embedded SDK

both, depending on runtime

Target Doc: NS-INT-009 (IMPL)

4. Summary

Intervention decisions establish it as:

a first-class NS engine

built on event-first truth

implemented as Core cluster + Edge caches

governed by GGP for protected transitions

optimized for real-time visualization and explainability


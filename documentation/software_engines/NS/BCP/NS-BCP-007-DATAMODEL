NS-BCP-007 — DATAMODEL

0. Document Control

Program: Northfield Solidarity (NS)

Engine: BCP — Blockchain Compute Plane

Document ID: NS-BCP-007-DATAMODEL

Status: Draft v1

Depends On: NS-BCP-002-TAXONOMY, NS-BCP-003-ARCHITECTURE, NS-BCP-006-VERSION

Owner: BCP Lead (TBD)

1. Purpose

This document defines BCP’s canonical data model for:

Contract Registry (source of truth)

Release & Deployment records (provenance)

Roles/Authority & custody (control plane)

Security artifacts (gates, audits, findings)

On-chain intelligence (events → normalized signals)

The model is designed to be:

auditable (immutable records + provenance)

integratable (feeds to SIG/FLO/IDN/DRE)

policy-enforceable (gates reference fields directly)

2. Model Overview (Entity Graph)

erDiagram
  BCP_SYSTEM ||--o{ CONTRACT_PACKAGE : contains
  CONTRACT_PACKAGE ||--o{ BUILD_ARTIFACT_SET : produces
  CONTRACT_PACKAGE ||--o{ DEPLOYMENT : instantiates
  DEPLOYMENT ||--o{ UPGRADE_EVENT : changes
  BCP_RELEASE ||--o{ RELEASE_ITEM : includes
  RELEASE_ITEM }o--|| DEPLOYMENT : results_in

  BCP_SYSTEM ||--o{ AUTHORITY_SET : governed_by
  AUTHORITY_SET ||--o{ ROLE_BINDING : assigns
  ROLE_BINDING }o--|| IDENTITY_REF : to

  BCP_SYSTEM ||--o{ SECURITY_ARTIFACT : requires
  SECURITY_ARTIFACT ||--o{ AUDIT_FINDING : yields

  DEPLOYMENT ||--o{ EVENT_SCHEMA : emits
  EVENT_SCHEMA ||--o{ SIGNAL_DEFINITION : normalizes
  SIGNAL_DEFINITION ||--o{ SIGNAL_EVENT : produces

  NETWORK ||--o{ DEPLOYMENT : hosts
  ENVIRONMENT ||--o{ DEPLOYMENT : scopes

3. Core Entities (Contract Registry)

3.1 BCP_SYSTEM

Represents a named on-chain system (may include multiple contracts + services).

Fields

system_id (string, unique) — e.g., BCP-SYS-Treasury

name (string)

description (text)

owner_identity_id (ref: IDENTITY_REF)

risk_class (enum: LOW|MEDIUM|HIGH|CRITICAL)

chain_strategy (enum: EVM_FIRST|MULTI_CHAIN|CHAIN_SPECIFIC)

upgrade_stance (enum: IMMUTABLE|UPGRADEABLE|MIGRATE_ONLY)

status (enum: DESIGN|BUILD|TEST|PROD|DEPRECATED|RETIRED)

created_at, updated_at

links (object) — repos, docs, dashboards

Relationships

has many CONTRACT_PACKAGE

has many DEPLOYMENT

has one or more AUTHORITY_SET

has many SECURITY_ARTIFACT

3.2 CONTRACT_PACKAGE

Versioned unit of contract code (module/package).

Fields

package_id (string, unique) — BCP-CONTRACT-{Name}

system_id (ref)

language (enum: SOLIDITY|VYPER|RUST|MOVE|OTHER)

repo_ref (string)

semver (string) — MAJOR.MINOR.PATCH

compiler (string) — name/version

build_profile (string) — optimizer settings, etc.

source_commit (string)

created_at

Relationships

produces BUILD_ARTIFACT_SET

instantiates DEPLOYMENT

3.3 BUILD_ARTIFACT_SET

Immutable build outputs required for provenance.

Fields

artifact_set_id (string, unique)

package_id (ref)

build_id (string)

bytecode_digests (array of string)

abi_digests (array of string)

source_map_digest (string, optional)

deps_lock_digest (string, optional)

toolchain_digest (string, optional)

created_at

Notes

This enables reproducibility and audit linking.

3.4 DEPLOYMENT

Represents one deployed instance (address) of a contract version on a network.

Fields

deployment_id (string, unique) — BCP-DEPLOY-{Package}-{Network}-{Stage}#{N}

system_id (ref)

package_id (ref)

artifact_set_id (ref)

environment_id (ref: ENVIRONMENT)

network_id (ref: NETWORK)

address (string)

tx_hash (string)

block_number (int)

deployed_at (timestamp)

deploy_signer_id (ref: SIGNER_REF)

config_digest (string)

init_params_ref (object/uri)

status (enum: ACTIVE|PAUSED|DEPRECATED|RETIRED)

Upgradeable-specific fields (optional)

is_proxy (bool)

proxy_type (enum: TRANSPARENT|UUPS|BEACON|OTHER)

implementation_address (string)

admin_controller (string)

3.5 BCP_RELEASE

Represents a coordinated release event.

Fields

release_id (string, unique) — BCP-REL-YYYYMMDD-###

system_id (ref)

change_class (enum: PATCH|MINOR|MAJOR|EMERGENCY)

risk_class (enum)

release_manifest_digest (string)

approved_by (array of IDENTITY_REF)

approval_record_refs (array of uri)

executed_by (IDENTITY_REF)

executed_at (timestamp)

notes (text)

3.6 RELEASE_ITEM

Links a release to the deployments/upgrades it caused.

Fields

release_item_id (string, unique)

release_id (ref)

action_type (enum: DEPLOY|UPGRADE|MIGRATE|PARAM_CHANGE)

target (ref: DEPLOYMENT or UPGRADE_EVENT)

pre_state_ref (ref: DEPLOYMENT, optional)

post_state_ref (ref: DEPLOYMENT, optional)

validation_ref (uri)

4. Governance & Authority Model

4.1 IDENTITY_REF

Reference to NS identity (human/agent/service) via IDN.

Fields

identity_id (string)

identity_type (enum: HUMAN|AGENT|SERVICE)

display_name (string)

idn_ref (uri)

4.2 AUTHORITY_SET

Defines the authority structure for a system (owner/admin/guardian/timelock).

Fields

authority_set_id (string, unique)

system_id (ref)

owner_model (enum: SINGLE|MULTISIG|MPC|TIMELOCK)

admin_model (enum: SINGLE|MULTISIG|MPC|TIMELOCK)

guardian_model (enum: SINGLE|MULTISIG|MPC)

timelock_seconds (int, optional)

multisig_address (string, optional)

notes (text)

4.3 ROLE_DEFINITION

Standard role definitions used across systems.

Fields

role_id (string) — BCP-ROLE-{Name}

description (text)

permissions (array of PERMISSION)

4.4 ROLE_BINDING

Binds roles to identities and/or on-chain addresses.

Fields

binding_id (string)

system_id (ref)

role_id (ref)

identity_id (ref, optional)

address (string, optional)

scope (enum: SYSTEM|NETWORK|DEPLOYMENT)

scope_ref (ref id)

effective_from, effective_to (timestamp, optional)

4.5 SIGNER_REF

Represents a signer usable by deployment/ops.

Fields

signer_id (string)

signer_type (enum: DEV_EPHEMERAL|HSM|MULTISIG|MPC)

environment_scope (enum: DEV|TEST|PROD)

custody_provider (string, optional)

rotation_policy_ref (uri)

5. Security & Assurance Model

5.1 SECURITY_ARTIFACT

Artifacts required by gates (threat model, runbook, etc.).

Fields

artifact_id (string)

system_id (ref)

artifact_type (enum: THREAT_MODEL|RUNBOOK|UPGRADE_POLICY|AUDIT_REPORT|ANALYSIS_REPORT|POSTMORTEM)

digest (string)

storage_ref (uri)

status (enum: DRAFT|REVIEWED|APPROVED|SUPERSEDED)

created_at

5.2 AUDIT_ENGAGEMENT

Tracks an external/internal audit.

Fields

audit_id (string)

system_id (ref)

vendor (string)

scope (text)

start_date, end_date

report_artifact_id (ref: SECURITY_ARTIFACT)

status (enum: PLANNED|IN_PROGRESS|RECEIVED|CLOSED)

5.3 AUDIT_FINDING

Tracks findings and remediation.

Fields

finding_id (string)

audit_id (ref)

severity (enum: INFO|LOW|MED|HIGH|CRITICAL)

title (string)

description (text)

status (enum: OPEN|MITIGATED|FIXED|VERIFIED|ACCEPTED)

remediation_ref (uri)

linked_commits (array)

closed_at (timestamp, optional)

5.4 POLICY_CHECK

Represents a gate evaluation result.

Fields

policy_check_id (string)

release_id (ref)

policy_name (string)

result (enum: PASS|FAIL|WAIVED)

evidence (object)

waiver_ref (uri, optional)

checked_at (timestamp)

5.5 INCIDENT

Tracks production incidents.

Fields

incident_id (string)

system_id (ref)

network_id (ref)

severity (enum: S1|S2|S3|S4)

summary (string)

status (enum: OPEN|MITIGATING|RESOLVED|POSTMORTEMED)

started_at, resolved_at

runbook_ref (uri)

postmortem_artifact_id (ref: SECURITY_ARTIFACT, optional)

6. Networks & Environments

6.1 ENVIRONMENT

Defines DEV/TEST/PROD and their constraints.

Fields

environment_id (enum: DEV|TEST|PROD)

description (text)

allowed_signer_types (array)

required_gates (array of policy names)

6.2 NETWORK

Defines a chain network.

Fields

network_id (string) — e.g., ETHMAIN, SEPOLIA, ARBMAIN

chain_id (int)

network_type (enum: L1|L2|L3)

purpose (enum: DEVNET|TESTNET|MAINNET)

finality_profile (string)

rpc_profiles (array of RPC_PROFILE)

indexing_profiles (array of INDEXER_PROFILE)

6.3 RPC_PROFILE

Defines RPC provider details.

Fields

rpc_profile_id (string)

network_id (ref)

provider (string)

endpoint_ref (uri)

tier (enum: PRIMARY|SECONDARY|FALLBACK)

status (enum: ACTIVE|INACTIVE)

6.4 INDEXER_PROFILE

Defines indexer/subgraph details.

Fields

indexer_profile_id (string)

network_id (ref)

provider (string)

endpoint_ref (uri)

schema_version (string)

status (enum: ACTIVE|INACTIVE)

7. Runtime Signals & Events

7.1 EVENT_SCHEMA

Defines emitted event structures for a deployment/system.

Fields

event_schema_id (string)

system_id (ref)

package_id (ref)

event_name (string)

indexed_fields (array)

payload_schema (json schema)

version (string)

7.2 SIGNAL_DEFINITION

Defines how events translate into internal normalized signals.

Fields

signal_def_id (string)

system_id (ref)

name (string)

source_event_schema_id (ref)

normalization_rule (text or DSL ref)

severity_mapping (object)

targets (array enum: SIG|FLO|DRE|SIM)

7.3 SIGNAL_EVENT

Materialized normalized signal instance.

Fields

signal_event_id (string)

signal_def_id (ref)

network_id (ref)

block_number (int)

tx_hash (string)

occurred_at (timestamp)

payload (json)

attribution_identity_id (ref: IDENTITY_REF, optional)

8. Minimal Required Tables (v1 Implementation Set)

If you want to stand up BCP quickly, the minimum viable registry includes:

BCP_SYSTEM

CONTRACT_PACKAGE

BUILD_ARTIFACT_SET

DEPLOYMENT

BCP_RELEASE

RELEASE_ITEM

AUTHORITY_SET

ROLE_BINDING

SECURITY_ARTIFACT

POLICY_CHECK

NETWORK

ENVIRONMENT

9. Data Integrity Rules (Constraints)

Every DEPLOYMENT must link to exactly one BUILD_ARTIFACT_SET.

PROD DEPLOYMENT must have:

approvals recorded in BCP_RELEASE

POLICY_CHECK results all PASS (or explicit WAIVED with waiver_ref)

AUTHORITY_SET present

Any WAIVER must be time-bounded and linked to a governance record.

Event schemas must be versioned; signal definitions must reference schema IDs.

10. Next Document

NS-BCP-008 — EEE (End-to-End Example) (walkthrough: build → verify → release → operate → upgrade)


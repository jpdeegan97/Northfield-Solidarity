export const FIRMAMENT_CHARTER = `NS-FIRMAMENT-000 — CHARTER

Project: Firmament (3D Operations Globe)
Program: Northfield Solidarity (NS)
Governance Authority: GGE (Governance Graph Engine)
Status: Draft v0.1

⸻

1. Purpose

Firmament is a real-time, zoomable 3D visualization of Earth that projects Northfield Solidarity’s operations, entities, opportunities, risks, and planned moves as layered, filterable operational truth.

Its purpose is to transform “business complexity” into a spatial, actionable cockpit:
•	See what’s happening now
•	See what’s likely to happen next
•	See what you should do about it
•	Execute via governed actions (through GGE + CWP)

⸻

2. Mission Statement

Make operations and strategy legible at a glance by rendering the business as a living globe with on/off layers for:
•	entities and logistics
•	events and timelines
•	sector health and heatmaps
•	risks, blockers, and mitigations
•	scenarios and “plan modes” (risk ↔ ambition)

⸻

3. Scope

In Scope

A) 3D Earth Visualization Core
•	Earth globe rendering (zoomable, rotateable, focusable)
•	Layer manager (toggle, filter, search)
•	Pins / paths / regions (points, lines, polygons)

B) Entity + Logistics Mapping
•	Map all business entities (NS, SL, subsidiaries, vendors, sites)
•	Map logistics flows (supplier → 3PL → customer, etc.)
•	Show relationship links + operational state

C) Events + Location Projection
•	Upcoming events list linked to geo locations
•	Event → drilldown: context, checklist, linked stakeholders, readiness state

D) Sector Heatmap Layer (Enhanced)
•	A sector treemap/heatmap view (weight + performance)
•	Selecting a sector reveals:
•	what’s going well / failing
•	root causes across ops/finance/supply/market
•	actionable mitigation and growth steps
•	plan slider variants (risk/ambition) that change recommended actions

E) Actionability
•	Every insight must map to:
•	a task (CWP) and/or
•	a governed decision gate (GGE) and/or
•	a simulation scenario (SIM)

Out of Scope (for initial releases)
•	Full ERP replacement
•	Full accounting system (FLO remains authoritative for ledgers)
•	Autonomous execution without governance gates
•	Real-time tracking that requires specialized hardware integrations unless explicitly added later

⸻

4. Key Users
•	Owner/Operator (You): global situational awareness + rapid planning
•	CWP Operators: tasking, accountability, readiness tracking
•	Governance Reviewers (GGE): decision traceability, approvals, constraints
•	Analysts (PIE/DRE/SIG consumers): signals → structured moves

⸻

5. Core Principles
1.	Spatial truth beats dashboards: geography and flow make complexity comprehensible.
2.	Layers, not screens: everything is a filterable overlay.
3.	Click-to-cause, click-to-action: every visualization drills down to root cause and produces next steps.
4.	Governed execution: no “important moves” without GGE traceability and gates.
5.	Scenario-native: the risk/ambition slider is first-class, not an afterthought.
6.	Render-ready projections: Firmament stores view models; engines remain sources of truth.

⸻

6. Primary Capabilities (MVP)
1.	Globe + Layer System
2.	Entity & Logistics Layer
3.	Events Layer (list + map sync)
4.	Sector Heatmap + Sector Operating Brief
5.	Action Items + Owners + Status
6.	Plan Slider (Conservative ↔ Aggressive) feeding scenario outputs

⸻

7. Integrations (Authoritative Sources)
•	IDN: entity graph, identities, relationships
•	MUX: external system integrations + data ingress
•	SIG: alerts/signals that trigger overlays
•	FLO: financial overlays (budget, cost, margin, exposure)
•	SIM: scenario engine powering slider outcomes
•	CWP: ownership, tasks, operational accountability
•	GGE: governance gates, approvals, audit trail of decisions

⸻

8. Success Metrics
•	Time-to-understand a situation (minutes → seconds)
•	Time-to-action from signal to assigned mitigations
•	Decision trace completeness (every major move has a GGE path)
•	Operational coverage (% of entities/events/flows mapped)
•	Scenario usefulness (slider outputs consistently change actions in meaningful ways)

⸻

9. Risks & Constraints
•	Data completeness risk: visualization quality depends on structured ingestion.
•	Over-complexity risk: must enforce “layer discipline” and avoid clutter.
•	Latency risk: real-time features must degrade gracefully.
•	Governance drift risk: Firmament must not become an ungated execution channel.

⸻

10. Deliverables
•	NS-FIRMAMENT-000 — Charter (this document)
•	NS-FIRMAMENT-001 — Overview
•	NS-FIRMAMENT-002 — Taxonomy
•	NS-FIRMAMENT-003 — Architecture
•	NS-FIRMAMENT-004 — Lifecycle
•	NS-FIRMAMENT-007 — Data Model
•	NS-FIRMAMENT-008 — End-to-End Example
•	NS-FIRMAMENT-013 — Runbook
•	NS-FIRMAMENT-014 — Data Definitions

⸻

11. Definition of Done (v0)

Firmament v0 is “done” when:
•	you can open the globe and toggle layers,
•	see mapped entities + logistics + events,
•	click a sector heatmap tile to get an operating brief + action list,
•	adjust the risk/ambition slider and see the recommended actions change,
•	and key actions route into CWP ownership and GGE governance.`;

export const MANIFOLD_TRACER_CHARTER = `ManifoldTracer™
Experiential Business Visualization & Flow Gamification Platform
Document ID: NP-WP-001
Status: Draft (Concept Charter)
Owner: Northfield Solidarity
Origin System: GGE HoloMap / Governance Graph Engine
Audience: Founders, Small & Mid-Sized Businesses, Product Teams, Operations Leaders

1. Purpose & Vision
Workplay™ is an experiential visualization platform that transforms real business operations into a game-like, living world—allowing teams to see work move, understand flow intuitively, and feel progress.

The vision of Workplay is simple but radical:
Make work visible, embodied, and engaging—without falsifying reality.

Workplay does not gamify work by adding artificial points or rewards. Instead, it makes the actual system legible and emotionally resonant through carefully designed metaphors.

2. Core Philosophy
Traditional productivity tools fail because they are:
  Abstract
  Text-heavy
  Fragmented
  Emotionally flat

Workplay replaces abstraction with spatial metaphor.
In Workplay:
  Progress is motion
  Blockages are obstacles
  Backlogs are congestion
  Success is arrival
  Failure is visible and instructive

Nothing is simulated. Everything is real.

3. Product Positioning
Workplay is not:
  A project management tool
  A task tracker
  A dashboard
  A productivity game

Workplay is:
  A living map of how a business operates
  A shared mental model for teams
  A motivational observability layer
  A narrative interface for operational reality

Tagline concepts:
  “See your work move.”
  “Turn your business into a living world.”
  “Make work visible.”

4. Target Users & Use Cases
Primary Users
  Founders and operators at 5–50 person companies
  Agencies, ecommerce brands, ops-heavy SMBs
  Teams overwhelmed by invisible work and hidden bottlenecks

Primary Use Cases
  Daily operational awareness
  Team standups and async check-ins
  Bottleneck discovery
  Motivation through visible momentum
  Explaining work to non-technical stakeholders

5. World Metaphor System
Workplay presents business operations through curated worlds. Each world is a visual skin over the same underlying data.

Solar System World
  Departments = planets
  Processes = orbits
  Work items = ships
  Approvals = gravity wells or jump gates

City World
  Teams = districts
  Workflows = roads
  Tasks = vehicles or citizens
  Bottlenecks = traffic jams

Factory World
  Inputs = raw materials
  Jobs = conveyor items
  QA / approvals = inspection stations
  Outputs = shipped goods

Worlds are interchangeable without changing the underlying system.

6. Data Integrity & Fidelity
Workplay is powered by real operational data.
  All visual entities map directly to real processes or flows
  State changes are driven by live or near-real-time events
  No synthetic scores or fictional success metrics are introduced

The system never lies to make the game feel better.

7. Interaction Model
Users can:
  Zoom and pan through their operational world
  Click entities to reveal lightweight context
  Filter by team, process, or time window
  Replay recent activity as a time-lapse

Workplay is primarily observational, not a control plane.

8. Technical Architecture (High-Level)
  Rendering Engine: Unreal Engine (desktop-first)
  Backend: Lightweight event and snapshot API
  Integration: Event-driven ingestion from source systems
  Data Contract: Neutral flow and entity events

Workplay functions as a renderer, not a decision-maker.

9. Relationship to GGE & HoloMap
Workplay is a derivative product built on top of the same foundational abstractions as GGE HoloMap.

GGE HoloMap
Workplay
Accurate, exhaustive
Stylized, simplified
Governance-first
Motivation-first
Operator-focused
Team-focused
Serious tone
Playful tone

Both products share a common event model but serve different audiences.

10. Security & Simplification Rules
  Sensitive data may be masked or aggregated
  Not all flows or entities must be visible
  Access levels determine world visibility

Workplay prioritizes clarity over completeness.

11. Non-Goals
Workplay explicitly does not:
  Replace source-of-truth systems
  Enforce policy or governance
  Introduce artificial incentives or scoring
  Encourage performative productivity

It exists to make reality understandable and engaging.

12. Long-Term Vision
Over time, Workplay evolves into:
  A daily ritual for teams
  A narrative replay tool for retrospectives
  A sales and onboarding visualization
  A cultural artifact of how work gets done

Workplay makes the invisible visible—and makes progress feel real.

13. Summary
Workplay™ transforms business operations into a living, explorable world.
By grounding play in truth, and delight in reality, it offers a new way to experience work—not as a list of tasks, but as a system in motion.`;

export const FANTASY_LAND_CHARTER = `Fantasy Land™
Experiential Business Visualization & Flow Gamification Platform
Document ID: NP-WP-000
Status: Draft (Concept Charter)
Owner: Northfield Solidarity
Origin System: GGE HoloMap / Governance Graph Engine
Audience: Founders, Small & Mid-Sized Businesses, Product Teams, Operations Leaders

1. Purpose & Vision
Workspaces™ is an experiential visualization platform that transforms real business operations into a game-like, living world—allowing teams to see work move, understand flow intuitively, and feel progress.

The vision of Workplay is simple but radical:
Make work visible, embodied, and engaging—without falsifying reality.

Workplay does not gamify work by adding artificial points or rewards. Instead, it makes the actual system legible and emotionally resonant through carefully designed metaphors.

2. Core Philosophy
Traditional productivity tools fail because they are:
  Abstract
  Text-heavy
  Fragmented
  Emotionally flat

Workplay replaces abstraction with spatial metaphor.
In Workplay:
  Progress is motion
  Blockages are obstacles
  Backlogs are congestion
  Success is arrival
  Failure is visible and instructive

Nothing is simulated. Everything is real.

3. Product Positioning
Workplay is not:
  A project management tool
  A task tracker
  A dashboard
  A productivity game

Workplay is:
  A living map of how a business operates
  A shared mental model for teams
  A motivational observability layer
  A narrative interface for operational reality

Tagline concepts:
  “See your work move.”
  “Turn your business into a living world.”
  “Make work visible.”

4. Target Users & Use Cases
Primary Users
  Founders and operators at 5–50 person companies
  Agencies, ecommerce brands, ops-heavy SMBs
  Teams overwhelmed by invisible work and hidden bottlenecks

Primary Use Cases
  Daily operational awareness
  Team standups and async check-ins
  Bottleneck discovery
  Motivation through visible momentum
  Explaining work to non-technical stakeholders

5. World Metaphor System
Workplay presents business operations through curated worlds. Each world is a visual skin over the same underlying data.

Solar System World
  Departments = planets
  Processes = orbits
  Work items = ships
  Approvals = gravity wells or jump gates

City World
  Teams = districts
  Workflows = roads
  Tasks = vehicles or citizens
  Bottlenecks = traffic jams

Factory World
  Inputs = raw materials
  Jobs = conveyor items
  QA / approvals = inspection stations
  Outputs = shipped goods

Worlds are interchangeable without changing the underlying system.

6. Data Integrity & Fidelity
Workplay is powered by real operational data.
  All visual entities map directly to real processes or flows
  State changes are driven by live or near-real-time events
  No synthetic scores or fictional success metrics are introduced

The system never lies to make the game feel better.

7. Interaction Model
Users can:
  Zoom and pan through their operational world
  Click entities to reveal lightweight context
  Filter by team, process, or time window
  Replay recent activity as a time-lapse

Workplay is primarily observational, not a control plane.

8. Technical Architecture (High-Level)
  Rendering Engine: Unreal Engine (desktop-first)
  Backend: Lightweight event and snapshot API
  Integration: Event-driven ingestion from source systems
  Data Contract: Neutral flow and entity events

Workplay functions as a renderer, not a decision-maker.

9. Relationship to GGE & HoloMap
Workplay is a derivative product built on top of the same foundational abstractions as GGE HoloMap.

GGE HoloMap
Workplay
Accurate, exhaustive
Stylized, simplified
Governance-first
Motivation-first
Operator-focused
Team-focused
Serious tone
Playful tone

Both products share a common event model but serve different audiences.

10. Security & Simplification Rules
  Sensitive data may be masked or aggregated
  Not all flows or entities must be visible
  Access levels determine world visibility

Workplay prioritizes clarity over completeness.

11. Non-Goals
Workplay explicitly does not:
  Replace source-of-truth systems
  Enforce policy or governance
  Introduce artificial incentives or scoring
  Encourage performative productivity

It exists to make reality understandable and engaging.

12. Long-Term Vision
Over time, Workplay evolves into:
  A daily ritual for teams
  A narrative replay tool for retrospectives
  A sales and onboarding visualization
  A cultural artifact of how work gets done

Workplay makes the invisible visible—and makes progress feel real.

13. Summary
Workplay™ transforms business operations into a living, explorable world.
By grounding play in truth, and delight in reality, it offers a new way to experience work—not as a list of tasks, but as a system in motion.`;

export const RELAY_CHARTER = `Project: RELAY
Status: Draft

Charter content is currently being finalized. Please check back soon.`;

export const WALL_STREET_PRO_CHARTER = `Project: WALL STREET PRO
Status: Draft

Charter content is currently being finalized. Please check back soon.`;

export const AEGIS_CHARTER = `NS-AEGIS-000 — CHARTER

Project: Aegis (Dependency Management Product)
Status: Draft v0.1 (working name + scope)

1) Mission

Create a productionized, standalone dependency management product that continuously inventories, governs, and monitors dependencies (software, vendors, services, data sources, infra components) using agentic operations via CWP, while remaining fully governed by GGE.

2) Problem Statement

Northfield Solidarity will accumulate thousands of dependencies across engines, projects, vendors, and runtimes. Without a dedicated product layer:

Inventory becomes fragmented (spreadsheets, tribal knowledge, repo-only views).

Approvals, renewals, deprecations, and version drift become inconsistent.

Security events (CVEs, vendor incidents) don’t reliably map to your actual blast radius.

“Who depends on what?” becomes slow, manual, and error-prone.

3) Product Thesis

CWP can do the work, but Aegis is the system-of-record + workflow product that:

Centralizes dependency truth into a Dependency Graph

Enforces policy and approvals through GGE

Uses CWP agents to keep it current (continuous discovery, verification, renewals, migrations)

Exposes clean APIs + dashboards for humans and other engines

4) Scope

In scope (MVP → V1)

Dependency Registry (canonical record + ownership + criticality)

Dependency Graph (who depends on what; upstream/downstream; environment-aware)

Change workflows (add / update / renew / deprecate / replace)

Policy gates via GGE (risk tiering, required approvals, evidence requirements)

Continuous monitoring

Software: SBOM ingestion, vulnerability mapping, version drift

Vendors/services: contract dates, SOC2/ISO evidence, incident watch

Infra/data: endpoint ownership, SLAs, data classifications

Agentic maintenance (CWP runs the loops that keep records fresh)

Explicit non-goals (initially)

Full procurement suite (POs, invoicing) → that’s FLO / finance workflows

Full GRC platform replacement (audits, frameworks end-to-end) → DMP integrates, doesn’t replace

“Perfect discovery” everywhere on day 1 (start with high-signal integrations)

5) Primary Users

Operators/Builders: add dependencies, request changes, plan upgrades/migrations

Governance/Approvers: review risk, evidence, and approve/deny

Security/Compliance: monitor vulnerabilities/incidents and compliance posture

CWP Agents: execute discovery, validation, follow-ups, and remediation plans

Other Engines/Projects: query dependency truth via API

6) Key Outcomes

Always-accurate dependency inventory (ownership + purpose + risk + lifecycle state)

Fast impact analysis (“if X breaks / is vulnerable, what is affected?”)

Enforced, repeatable approvals and evidence capture

Predictable lifecycle (renewals, deprecations, replacements happen on time)

7) Core Capabilities

Registry & Ownership: owner, steward, system boundary, environment mapping

Criticality & Risk: impact score, data sensitivity, availability tier, trust tier

Evidence Vault: SBOMs, attestations, SOC2 reports, pen tests, DPIAs, etc.

Lifecycle States: proposed → approved → active → constrained → deprecated → removed

Change Requests: structured diffs + required checks + audit trails

Monitoring & Alerts: CVEs/incidents, SLA breaches, contract renewal windows, EOL

Playbooks: remediation/migration plans (executed by CWP)

8) Integration Model (how it fits NS)

GGE (Governance Graph Engine): authoritative policy + approvals + audit immutability

CWP (Cognitive Work Plane): agentic execution (discovery loops, chasing evidence, upgrades)

IDN: entity identity (vendors, packages, services), canonical IDs

SIG: signal aggregation (CVE feeds, incident feeds, repo signals, runtime drift)

MUX: connectors to external systems (GitHub, artifact repos, CMDB-ish sources, ticketing, etc.)

FLO: optional linkage for contract cost centers / renewal spend (not the accounting system)

9) High-Level Architecture

flowchart LR
  subgraph Users
    U1[Builders/Operators]
    U2[Approvers/Governance]
    U3[Security/Compliance]
  end

  subgraph DMP[Dependency Management Product]
    R[Dependency Registry]
    G[Dependency Graph]
    CR[Change Requests]
    EV[Evidence Vault]
    M[Monitoring & Alerts]
    UI[UI / API]
  end

  subgraph NS_Engines[NS Engines]
    CWP[CWP - Agentic Work]
    GGE[GGE - Policy/Approvals/Audit]
    IDN[IDN - Identity Nexus]
    SIG[SIG - Signals]
    MUX[MUX - Integrations]
    FLO[FLO - Financial Links]
  end

  U1 --> UI
  U2 --> UI
  U3 --> UI

  UI --> R
  UI --> G
  UI --> CR
  UI --> EV
  UI --> M

  R <--> IDN
  G <--> R
  M <--> SIG
  MUX --> R
  MUX --> EV

  CR --> GGE
  GGE --> CR

  CWP <--> R
  CWP <--> EV
  CWP <--> M
  FLO -. optional .-> R

10) Data Model (charter-level)

Primary entities

Dependency (software pkg, vendor, service, dataset, infra component)

DependencyVersion / Release (where applicable)

Owner / Steward (human + agent roles)

Relationship (depends_on, provides_to, transitive, runtime, buildtime)

PolicyProfile (risk tier, required evidence, approval chain)

EvidenceArtifact (SBOM, SOC2, attestation, security review, etc.)

ChangeRequest (add/update/renew/deprecate/replace)

IncidentSignal (CVE, outage, breach notice) and ImpactAssessment

Snapshot (time-based graph state for audits and “as-of” questions)

11) MVP Definition (what “done” means)

MVP ships when you can:

Register dependencies (manual + at least 1 automated connector)

Produce a dependency graph view with upstream/downstream impact

Run a governed “Add Dependency” and “Update Dependency” workflow via GGE

Ingest SBOM (or equivalent) and map at least one vulnerability feed into impacted nodes

Have CWP agents run a scheduled “freshness loop” (ownership + evidence + version drift)

12) Success Metrics

% dependencies with named owner + risk tier + lifecycle state

Mean time to answer: “what breaks if X changes?”

% renewals handled before deadline

Vulnerability-to-impact mapping latency (signal → impacted graph)

Reduction in “unknown/transitive” dependencies over time

13) Risks & Mitigations

Discovery gaps: start with high-value surfaces (repos, containers, vendor list) → expand connectors

Noise from signals: use SIG normalization + severity thresholds + environment weighting

Workflow friction: keep approvals policy-driven and adaptive (risk tier determines rigor)

Graph correctness: require snapshots + confidence scoring + human override paths

14) Immediate Next Steps

Assign an internal identifier: NS-AEGIS

Define dependency categories + initial policies (risk tiers, required evidence)

Choose MVP connectors (e.g., GitHub repos + container registry + one vendor tracker)

Define the first 3 playbooks for CWP:

Dependency onboarding

Vulnerability triage → impact → remediation plan

Renewal / evidence refresh loop
`;

export const AEGIS_RUNBOOK = `NS-AEGIS-013 — RUNBOOK

Project: Aegis (Dependency Management Product)

1) Runbook Purpose

This runbook describes how to operate Aegis in production:

Normal operations (daily/weekly/monthly)

Handling incidents and degradations

Data consistency and recovery

Connector health and ingestion coverage

Governance workflow failures (GGE) and loop failures (CWP)

2) Operating Model

2.1 Primary Operators

Aegis Operator (Platform): service health, data integrity, connectors, backups

Governance Operator: policy set rollout coordination (GGE alignment)

Security Operator: signal triage + incident workflow correctness

2.2 Always-On Dependencies

Registry DB

Graph Store

Evidence Object Store

Event Bus

Integrations: GGE, CWP, SIG, IDN, MUX

3) Standard Operating Procedures (SOP)

3.1 Daily SOP

Check service health dashboard (healthy/degraded/down)

Check event bus lag and consumer health (Aegis, CWP, connectors)

Review high severity signals (high/critical)

Review tier_3 evidence expirations within 30 days

Verify connector coverage is not dropping unexpectedly

3.2 Weekly SOP

Review drift summary (if enabled): top drifting dependencies

Review expired evidence counts by tier

Review open CRs stuck in evidence_pending/approvals_pending

Review snapshot creation rate (commits + incident closures)

3.3 Monthly SOP

Review policy baselines (GGE policy set version changes)

Review top tier_3 dependencies and validate ownership

Review connector contract versions (N-1 compatibility)

Validate retention policies for evidence and snapshots

4) Health Checks & SLOs

4.1 Health Endpoints

/health — liveness

/ready — readiness (DB + graph + object store reachable)

/metrics — operational telemetry

4.2 Recommended SLOs (initial)

API availability: 99.9%

Graph impact query p95: < 2s (prod scope)

CR commit latency p95: < 60s after final approval

Signal mapping latency p95: < 60s for high/critical

5) Incident Response (Aegis Service)

5.1 Severity Levels

SEV1: Aegis down or cannot commit governed changes

SEV2: Graph queries failing or inconsistent, ingestion stalled

SEV3: Partial connector outages, evidence store degradation, elevated latency

5.2 First Response Checklist

Confirm service state: healthy/degraded/down

Check Registry DB connectivity and error rate

Check Graph store connectivity and query error rate

Check object store access for evidence operations

Check event bus lag and consumer offsets

Check integration health: GGE, IDN, SIG, CWP, MUX

6) Failure Modes & Playbooks

6.1 Registry DB Down

Symptoms

5xx on registry endpoints

CR creation/commit failing

Immediate actions

Fail reads to cached/indexed results if available (degraded mode)

Pause commits (protect invariants)

Restore DB connectivity / failover

Recovery

Validate schema migration state

Run consistency check against last snapshot

6.2 Graph Store Down

Symptoms

Impact queries failing

Graph view unavailable

Immediate actions

Degrade: allow registry operations but flag “impact unavailable”

Block high-risk changes that require impact confirmation (tier_2/tier_3)

Recovery

Restore graph store

Rebuild graph from registry + event log (if needed)

6.3 Evidence Object Store Issues

Symptoms

Evidence uploads fail

Evidence retrieval fails

Immediate actions

Block approvals that require evidence attachment (tier_2/tier_3)

Allow read-only CR views

Recovery

Validate object store credentials + encryption settings

Reconcile evidence metadata against object store inventory

6.4 Event Bus Lag / Outage

Symptoms

Connector observations not applied

CWP loops not executing

Signal processing delayed

Immediate actions

Switch to “stale mode” banner in UI

Freeze confidence decay timers (optional) to avoid false posture degradation

Recovery

Restart consumers; verify offsets

Reprocess backlog with idempotency

6.5 GGE Unavailable (Governance Path Broken)

Symptoms

CRs stuck in submitted or policy_evaluated

Approvals not updating

Immediate actions

Continue allowing draft CR creation

Pause submit or flag as “governance unavailable”

For SEV1 emergency only: allow time-boxed local “hold” without commit

Recovery

Once GGE is back, re-run policy evaluation for impacted CRs

Ensure no commits occurred without audit refs

6.6 IDN Unavailable (Identity Resolution Broken)

Symptoms

Cannot resolve canonical IDs

New dependency creation blocked

Immediate actions

Allow CR drafts with temporary local IDs (NOT committable)

Recovery

Backfill canonical IDs once IDN returns

6.7 SIG Unavailable (Signals Missing)

Symptoms

No new signals ingested

Incident response pipeline silent

Immediate actions

Display warning: “signals delayed”

Keep existing signals visible

Recovery

Backfill signals from SIG backlog (if supported)

6.8 CWP Unavailable (Loops Not Running)

Symptoms

Evidence chasing stalled

Freshness loop not updating

Remediation plans not generated

Immediate actions

Raise posture banner: “agentic ops degraded”

Route evidence requests to humans (manual fallback)

Recovery

Re-run missed loop schedules

Reconcile loop outcomes with Aegis state

7) Consistency & Reconciliation

7.1 Registry vs Graph Divergence

Detection

Consistency state: in_sync | lagging | diverged

Reconciliation steps

Compare last committed CRs to graph edge presence

Reapply event stream (idempotent)

If needed: rebuild graph from registry export

7.2 Snapshot Verification

Validate snapshot creation at CR commit and incident closure

Spot-check exports for completeness

8) Security Operations

Rotate credentials for:

DB

graph store

object store

event bus

Ensure evidence access policies enforce least privilege

Audit approval records include gge_audit_ref

9) Backup & Recovery

9.1 Backup Policy

Registry DB: daily full + point-in-time if supported

Graph store: periodic export or rebuild plan

Evidence store: bucket replication/versioning (as available)

Snapshots: retention tiers (recent vs archive)

9.2 Restore Procedure (High-level)

Restore registry DB

Restore evidence metadata pointers

Rebuild graph from registry + event log/snapshots

Verify CR and approval integrity

10) Deployment & Rollout

Use progressive rollout (canary) for Aegis service

Gate migrations behind readiness checks

Validate:

policy contract tests

graph query golden tests

event contract compatibility

11) Operator Queries (Quick Commands / Questions)

“Are we ingesting observations from all connectors?”

“Is event lag within bounds?”

“Do we have tier_3 dependencies with expired evidence?”

“Are any CRs stuck due to governance outages?”

“Are snapshots being created at every commit?”

12) MVP Runbook Cut

MVP runbook must support:

Basic service health and SLO checks

Failure handling for DB/graph/object store/event bus

Integration failure handling for GGE/CWP/SIG/IDN

Registry↔graph reconciliation guidance

Backup and restore at a high level`;

export const AEGIS_DATAREF = `NS-AEGIS-014 — DATAREF

Project: Aegis (Dependency Management Product)

1) Data Reference Purpose

This document defines Aegis’ data inputs, outputs, and storage references so that:

Integrations know what to send and what to expect

Operators know what “source of truth” exists for each data class

Governance and audit can trace posture to evidence, signals, and snapshots

Aegis data is grouped into:

Registry facts (truth)

Graph facts (impact)

Evidence artifacts (trust)

Signals & incidents (operations)

Snapshots (audit replay)

Observations (connector emissions)

2) Canonical Data Stores

These are conceptual stores; implementation choices may vary.

2.1 Registry DB (SQL)

Purpose: canonical dependency records and workflow state.

Primary datasets (tables/collections)

dependency

dependency_unit

principal

policy_profile

change_request

policy_decision

approval_record

evidence_artifact (metadata only)

signal

incident_case

snapshot (metadata only)

observation

Source of truth: Aegis

2.2 Graph Store

Purpose: fast traversals for impact analysis.

Primary datasets

nodes (dependency + DU nodes)

edges (relationship edges with qualifiers)

Source of truth: Aegis (derived from CR commits + observations)

2.3 Evidence Object Store

Purpose: binary artifacts (SBOMs, PDFs, attestations, reports).

Primary datasets

evidence/{evidence_id}/{revision} (object keys)

Source of truth: Aegis stores metadata; objects live in object store.

2.4 Event Bus

Purpose: decouple ingestion + loops + state updates.

Primary topics (canonical naming)

aegis.* (Aegis-emitted)

gge.* (GGE-emitted)

sig.* (SIG-emitted)

mux.* (connector-emitted)

cwp.* (agent-emitted)

2.5 Search Index (optional)

Purpose: operator search across dependencies, evidence, CRs.

Primary indices

dependency_index

cr_index

evidence_index

3) Inbound Data Feeds (Inputs)

3.1 IDN (Identity Resolution)

Input type: identity resolution results

Used for:

canonical dependency IDs

alias normalization

principal identity references

Key fields

canonical_id

aliases[]

idn_ref

3.2 GGE (Governance)

Input type: policy evaluation and approval events

Used for:

CR required evidence + approval chain

approval decisions + audit references

Key fields

policy_set_id, policy_set_version

evaluation_inputs, evaluation_outputs

approval_step_id, approver_ref, decision, decided_at

gge_audit_ref

3.3 SIG (Signals)

Input type: normalized signals

Used for:

vulnerability/incident/EOL/renewal/drift alerts

triggering incident workflows and/or CR proposals

Signal minimum schema

signal_type

severity

confidence

subject_hint (identifiers; vendor/package/service)

scope_hint (env/region/boundary)

payload (free-form)

3.4 MUX (Connector Observations)

Input type: observations about dependencies, edges, evidence, renewal windows, drift.

Observation minimum schema

connector_name, connector_version, contract_version

observation_type

scope (env/region/boundary)

confidence (observed/inferred)

payload

Common observation payloads

dependency observed (name, class/subclass, identifiers)

edge observed (from, to, edge_type, env, last_seen_at)

evidence observed (artifact pointers, hashes, timestamps)

renewal window (vendor, contract id, renewal date)

drift observed (declared vs observed version/config)

3.5 CWP (Loop Results)

Input type: enrichment and operational outcomes

Used for:

evidence collection outcomes

enrichment proposals (aliases, edges, metadata)

remediation plans for incidents

Key payloads

cwp.evidence.collected

cwp.enrichment.proposed

cwp.remediation.plan.proposed

4) Outbound Data (Outputs)

4.1 Product APIs (UI + consumers)

Aegis outputs via /api/v1/...:

registry records

graph query results

CR and approval state

evidence status

signals/incidents

snapshots

4.2 Export Bundles

Aegis supports export of:

registry state

graph state

evidence manifest (not necessarily all binaries)

snapshot bundles

Recommended export formats

JSONL for registry exports

CSV for operator reporting

Graph export (JSON adjacency or common graph formats)

5) Canonical Schemas (Reference)

5.1 Dependency (canonical)

dependency_id (canonical)

class, subclass

status, risk_tier, criticality

owner_ref, steward_ref

policy_profile_ref

last_verified_at

5.2 Dependency Unit (canonical)

dependency_id

du_key

environment, region, system_boundary

status

constraints

last_observed_at

5.3 Edge (canonical)

from_node, to_node

edge_type

environment, system_boundary

confidence (declared/observed/inferred)

last_seen_at

5.4 Evidence Artifact (canonical)

evidence_id, evidence_type, revision

subject_type, subject_ref

hash, source

verified_status, verified_at, expires_at

5.5 Snapshot (canonical)

snapshot_id

trigger + trigger_ref

registry_schema_version, graph_semantics_version

graph_export_uri, registry_export_uri

6) Evidence Reference Catalog

Aegis evidence types are defined in NS-AEGIS-002.

Operational expectations

Tier_3 evidence generally requires:

freshness window

verification method

expiry enforcement behavior (constrain vs warn)

Binary formats (common)

PDF (SOC2, ISO)

JSON (SBOM)

HTML/PDF exports (questionnaires)

Signed attestations (JSON + signature)

7) Retention & Expiry

Retention policies are policy-driven and may vary by tier.

7.1 Registry Data

Retain CRs and approval records for audit duration (default: long-lived).

7.2 Evidence Artifacts

Retain by:

risk tier

contract requirements

privacy constraints

7.3 Snapshots

Retain recent snapshots at higher frequency; archive older snapshots.

7.4 Observations

Raw observations may be retained short-term if storage pressure is high; summarize into derived posture.

8) Data Access Controls

8.1 Access Dimensions

environment (prod vs non-prod)

system boundary (engine/project/service)

risk tier

data sensitivity

8.2 Sensitive Data

Evidence may contain sensitive vendor and security information.

Enforce least privilege on evidence retrieval.

Prefer storing only metadata in registry DB; binaries in encrypted object store.

9) Lineage & Provenance

Aegis must be able to answer:

“Why do we believe this edge exists?” (declared vs observed vs inferred)

“Which connector last observed this?”

“Which CR introduced this dependency/scope?”

“Which policy version approved it?”

Provenance fields (minimum)

created_by / observed_by references

source_event_id

confidence

first_seen_at / last_seen_at

cr_id link (for declared facts)

10) MVP Dataref Cut

MVP requires:

Registry DB tables for dependency, DU, CR, evidence metadata, signals/incidents, snapshots

Graph edges sufficient for downstream impact queries

Evidence object store integration

Event bus topic names + minimal payload schemas

Clear contracts for GGE approvals and SIG signals`;

